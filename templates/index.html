<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IATI Data Store CSV Query Builder (Alpha Version)</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link href="static/css/custom.css" type="text/css" rel="stylesheet">
    <link href="static/css/chosen.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css">
  </head>
  <body dir="ltr">
    <div class="container">
      <div class="header row">
        <div class="col">
          <h1 dir="ltr">IATI Data Store CSV Query Builder (Alpha Version)</h1>
          <p>Please read the <a href="http://datastore.iatistandard.org/docs/user-guide/">user guide</a></p>
        </div>
      </div><!-- end class="header" -->

      <div class="query-builder">
        <div class="row"><!-- result -->
          {% if api_link %}
            <div class="alert alert-success" role="alert">
              <strong>Your link:</strong> <a href="{{ api_link }}">{{ api_link|escape }}</a>
            </div>

            {% if notice_message %}
              <div class="alert alert-warning" role="alert">
                <strong>Warning:</strong> {{ notice_message }}
              </div>
            {% endif %}

          {% elseif error_message %}
            <div class="alert alert-danger" role="alert">
              <strong>Error:</strong> {{ error_message }}
            </div>
          {% endif %}
        </div>

        <form action="index.php" method="post" target="_self" onsubmit="">

          <div class="form-row">
            <div class="col">
              <label for="entry_1689841214">
                <div>Choose format
                  <label for="itemView.getDomIdToLabel()" aria-label="(Required field)"></label>
                </div>
              </label>
              <ul>
                <li>
                  <label>
                    <input type="radio" name="entry.1085079344" value="activity" id="group_1085079344_1" aria-label="Activity"
                    {% if not dataset or (dataset and dataset == "activity") %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>One activity per row</span>
                  </label>
                </li>
                <li>
                  <label>
                    <input type="radio" name="entry.1085079344" value="transaction" id="group_1085079344_2" aria-label="Transaction"
                    {% if dataset and dataset == "transaction" %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>One transaction per row</span>
                  </label>
                </li>
                <li>
                  <label>
                    <input type="radio" name="entry.1085079344" value="budget" id="group_1085079344_3" aria-label="Budget"
                    {% if dataset and dataset == "budget" %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>One budget per row</span>
                  </label>
                </li>
              </ul>
            </div>

            <div class="col">
              <label for="entry_1948547450">
                <div>Repeat rows?
                  <label for="itemView.getDomIdToLabel()" aria-label="(Required field)"></label>
                </div>
              </label>
              <ul>
                <li>
                  <label>
                    <input type="radio" name="entry.71167035" value="summary" id="group_71167035_1" aria-label="Summary"
                    {% if not format or (format and format == "summary") %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>No</span>
                  </label>
                </li>
                <li>
                  <label>
                    <input type="radio" name="entry.71167035" value="by_sector" id="group_71167035_2" aria-label="By Sector"
                    {% if format and format == "by_sector" %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>Multi-sector expansion</span>
                  </label>
                </li>
                <li>
                  <label>
                    <input type="radio" name="entry.71167035" value="by_country" id="group_71167035_3" aria-label="By Country"
                    {% if format and format == "by_country" %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>Multi-country expansion</span>
                  </label>
                </li>
              </ul>
            </div>

            <div class="col">
              <label for="entry_1414120858">
                <div>Choose sample size
                  <label for="itemView.getDomIdToLabel()" aria-label="(Required field)"></label>
                </div>
              </label>
              <ul>
                <li>
                  <label>
                    <input type="radio" name="entry.1352830161" value="50 rows" id="group_1352830161_1" aria-label="50 rows"
                    {% if not size or (size and size == "50 rows") %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>50 rows</span>
                  </label>
                </li>
                <li>
                  <label>
                    <input type="radio" name="entry.1352830161" value="Entire selection" id="group_1352830161_2" aria-label="Entire selection"
                    {% if size and size == "stream=True" %}
                      checked="checked"
                    {% endif %}
                    />
                    <span>Entire selection</span>
                  </label>
                </li>
              </ul>
            </div>
          </div>

          <div class="row form-group">
            <label for="entry_1922375458">
              <div>Select reporting organisation (eg UK DFID = GB-GOV-1)</div>
              <div dir="ltr"></div>
            </label>
            <div class="clearfix"></div>
            <select data-placeholder="Choose a reporting organisation..." multiple class="chosen-select form-control" id="entry_1922375458[]" name="entry.1922375458[]">
              {{ include('include/reporting_org.html') }}
            </select>
          </div>

          <div class="row form-group">
            <label for="entry_18398991">
              <div>Select type of reporting organisation (eg. INGO = 21)</div>
            </label>
            <div class="clearfix"></div>
            <select data-placeholder="Choose a reporting organisation type..." multiple class="chosen-select form-control" id="entry_18398991[]" name="entry.18398991[]">
              {{ include('include/reporting_org_type.html') }}
            </select>
          </div>

          <div class="row form-group">
            <label for="entry_1954968791">
              <div>Select sector (eg Basic Health Care = 12220)</div>
            </label>
            <div class="clearfix"></div>
            <select data-placeholder="Choose a sector..." multiple class="chosen-select form-control" id="entry_1954968791[]" name="entry.1954968791[]">
              {{ include('include/sector.html') }}
            </select>
          </div>

          <div class="row form-group">
            <fieldset>
              <legend>Select EITHER a country OR a region</legend>
              <div class="errorbox-good">
                <div dir="ltr">
                  <div>
                    <label for="entry_605980212">
                      <div>Select recipient country</div>
                    </label>
                    <div class="clearfix"></div>
                    <select data-placeholder="Choose a country..." multiple class="chosen-select form-control" id="entry_605980212[]" name="entry.605980212[]">
                      {{ include('include/country.html') }}
                    </select>
                  </div>
                </div>
              </div>
              <div class="errorbox-good">
                <div dir="ltr">
                  <div>
                    <label for="entry_1179181326">
                      <div>Select region (eg South Asia = 679)</div>
                    </label>
                    <div class="clearfix"></div>
                    <select data-placeholder="Choose a region..." multiple class="chosen-select form-control" id="entry_1179181326[]" name="entry.1179181326[]">
                      {{ include('include/region.html') }}
                    </select>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="row form-group">
            <div class="col-auto">
              <label>
                <div>Select start date</div>
              </label for="start_date">
              <div class="clearfix"></div>
              <div class="input-group date" data-provide="datepicker" data-date-format="yyyy-mm-dd">
                <div class="input-group-addon">Before</div>
                <input class="form-control" placeholder="yyyy-mm-dd" type="date" id="start_date__lt" name="start_date__lt">
                </input>
              </div>
              <div class="input-group date" data-provide="datepicker" data-date-format="yyyy-mm-dd">
                <div class="input-group-addon">After</div>
                <input class="form-control" placeholder="yyyy-mm-dd" type="date" id="start_date__gt" name="start_date__gt">
                </input>
              </div>
            </div>
            <div class="col-auto">
              <label>
                <div>Select end date</div>
              </label for="end_date">
              <div class="clearfix"></div>
              <div class="input-group date" data-provide="datepicker" data-date-format="yyyy-mm-dd">
                <div class="input-group-addon">Before</div>
                <input class="form-control" placeholder="yyyy-mm-dd" type="date" id="end_date__lt" name="end_date__lt">
                </input>
              </div>
              <div class="input-group date" data-provide="datepicker" data-date-format="yyyy-mm-dd">
                <div class="input-group-addon"/>After</div>
                <input class="form-control" placeholder="yyyy-mm-dd" type="date" id="end_date__gt" name="end_date__gt">
                </input>
              </div>
            </div>
          </div>

          <div class="row form-group">
            <label for="transaction_provider_org">
              <div>Select transaction provider org</div>
            </label>
            <div class="clearfix"></div>
            <select data-placeholder="Choose a transaction provider organisation..." multiple class="chosen-select form-control" id="transaction_provider_org" name="transaction_provider_org[]">
              {{ include('include/transaction_provider_org.html') }}
            </select>
          </div>

          <div class="row form-group">
            <label for="participating_org">
              <div>Select participating organisation</div>
            </label>
            <div class="clearfix"></div>
            <select data-placeholder="Choose a participating organisation..." multiple class="chosen-select form-control" id="participating_org" name="participating_org[]">
              {{ include('include/participating_org.html') }}
            </select>
          </div>

          <br/>
          <div class="form-row">
            <div class="clearfix"></div>
            <div class="col">
              <button class="btn btn-primary" type="submit">Submit</button>
              <button class="btn btn-secondary" type="reset">Reset</button>
            </div>
          </div>

        </form>

      </div><!-- end class="query-builder"-->


      <div class="row footer">
        <div class="col">
          <p>IATI Query Builder is free software licenced under the GNU General Public License.<br/>
          <ul>
            <li><a href="https://github.com/IATI/IATI-Query-Builder" target="_blank" rel="noopener noreferrer nofollow">IATI Query Builder on GitHub</a></li>
            <li>Please report problems to our <a href="https://github.com/IATI/IATI-Query-Builder/issues" target="_blank" rel="noopener noreferrer nofollow">issues list</a>.</li>
            <li>Datastore documentation: <a href="http://datastore.iatistandard.org/" target="_blank" rel="noopener noreferrer">http://datastore.iatistandard.org</a></li>
          </ul>
          </p>
        </div>
      </div><!-- end class="footer"-->


    </div><!-- end class="container"-->

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script src="static/js/chosen.jquery.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <script>
      $(".chosen-select").chosen()
    </script>
    <script src="static/js/datepicker.js" type="text/javascript"></script>
  </body>
</html>
